{"ast":null,"code":"const getTotalRecords = async (startDate, endDate) => {\n  try {\n    const res = await fetch(`https://api.fda.gov/drug/event.json?search=receivedate:[${startDate}+TO+${endDate}]&limit=1`).catch(error => console.log(error));\n\n    if (res && \"json\" in res) {\n      const json = await res.json();\n      return json.meta.results.total;\n    }\n  } catch (error) {\n    console.log(\"An error occured while fetching data\");\n    return null;\n  }\n};\n\nconst getSexDivision = async (startDate, endDate) => {\n  try {\n    const res = await fetch(`https://api.fda.gov/drug/event.json?search=receivedate:[${startDate}+TO+${endDate}]&count=patient.patientsex`).catch(error => console.log(error));\n\n    if (res && \"json\" in res) {\n      const json = await res.json();\n      return json.results.map(res => ({\n        term: convertSex(res.term),\n        count: res.count\n      }));\n    }\n  } catch (error) {\n    console.log(\"An error occured while fetching data\");\n    return null;\n  }\n};\n\nconst convertSex = sex => {\n  switch (sex) {\n    case 1:\n      return \"Male\";\n\n    case 2:\n      return \"Female\";\n\n    default:\n      return \"Unknown\";\n  }\n};\n\nconst getDrugIndication = async (startDate, endDate) => {\n  try {\n    const res = await fetch(`https://api.fda.gov/drug/event.json?search=receivedate:[${startDate}+TO+${endDate}]&count=patient.drug.drugindication`).catch(error => console.log(error));\n\n    if (res && \"json\" in res) {\n      const json = await res.json();\n      return json.results;\n    }\n  } catch (error) {\n    console.log(\"An error occured while fetching data\");\n    return null;\n  }\n};\n\nexport const Data = (startDate, endDate) => ({\n  getTotalRecords: getTotalRecords(startDate, endDate),\n  getSexDivision: getSexDivision(startDate, endDate),\n  getDrugIndication: getDrugIndication(startDate, endDate)\n});","map":null,"metadata":{},"sourceType":"module"}